{% extends "base.html" %}

{% block title %}Editar Funcionario - {{ funcionario.primer_nombre }} {{ funcionario.primer_apellido }}{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h1 class="h3 mb-0">
                    <i class="fas fa-edit me-2"></i> 
                    Editar Funcionario: {{ funcionario['primer_nombre'] }} {{ funcionario['primer_apellido'] }}
                </h1>
                <p class="text-muted">CI: {{ funcionario['ci'] }}</p>
            </div>
            <div>
                <a href="{{ url_for('funcionario_ver', ci=funcionario['ci']) }}" class="btn btn-secondary">
                    <i class="fas fa-times me-1"></i> Cancelar
                </a>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <form method="POST" action="{{ url_for('funcionario_editar', ci=funcionario['ci']) }}">
                    <!-- Pestañas igual que en registro pero con datos cargados -->
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="primer_apellido" class="form-label">Primer Apellido *</label>
                            <input type="text" class="form-control" id="primer_apellido" name="primer_apellido" 
                                   value="{{ funcionario['primer_apellido'] or '' }}" maxlength="30" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="primer_nombre" class="form-label">Primer Nombre *</label>
                            <input type="text" class="form-control" id="primer_nombre" name="primer_nombre" 
                                   value="{{ funcionario['primer_nombre'] or '' }}" maxlength="30" required>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="segundo_apellido" class="form-label">Segundo Apellido</label>
                            <input type="text" class="form-control" id="segundo_apellido" name="segundo_apellido" 
                                   value="{{ funcionario['segundo_apellido'] or '' }}" maxlength="30">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="segundo_nombre" class="form-label">Segundo Nombre</label>
                            <input type="text" class="form-control" id="segundo_nombre" name="segundo_nombre" 
                                   value="{{ funcionario['segundo_nombre'] or '' }}" maxlength="30">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="estado" class="form-label">Estado</label>
                            <select class="form-select" id="estado" name="estado">
                                <option value="pendiente" {% if funcionario['estado'] == 'pendiente' %}selected{% endif %}>Pendiente</option>
                                <option value="activo" {% if funcionario['estado'] == 'activo' %}selected{% endif %}>Activo</option>
                                <option value="inactivo" {% if funcionario['estado'] == 'inactivo' %}selected{% endif %}>Inactivo</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="nro_resolucion" class="form-label">Número de Resolución</label>
                            <input type="text" class="form-control" id="nro_resolucion" name="nro_resolucion" 
                                   value="{{ funcionario['nro_resolucion'] or '' }}" maxlength="20">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="fecha_resolucion" class="form-label">Fecha Resolución</label>
                            <input type="date" class="form-control" id="fecha_resolucion" name="fecha_resolucion" 
                                   value="{{ funcionario['fecha_resolucion'] or '' }}">
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="fecha_posesion" class="form-label">Fecha Posesión</label>
                            <input type="date" class="form-control" id="fecha_posesion" name="fecha_posesion" 
                                   value="{{ funcionario['fecha_posesion'] or '' }}">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="nro_item" class="form-label">Número del Ítem</label>
                            <input type="text" class="form-control" id="nro_item" name="nro_item" 
                                   value="{{ funcionario['nro_item'] or '' }}">
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="administracion" class="form-label">Administración</label>
                            <select class="form-select" id="administracion" name="administracion">
                                <option value="">Seleccionar...</option>
                                <option value="SISTEMA CENTRAL" {% if funcionario['administracion'] == 'SISTEMA CENTRAL' %}selected{% endif %}>Sistema Central</option>
                                <option value="RRHH" {% if funcionario['administracion'] == 'RRHH' %}selected{% endif %}>Recursos Humanos</option>
                                <option value="FINANZAS" {% if funcionario['administracion'] == 'FINANZAS' %}selected{% endif %}>Finanzas</option>
                                <option value="SISTEMAS" {% if funcionario['administracion'] == 'SISTEMAS' %}selected{% endif %}>Sistemas</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="unidad_organizacional" class="form-label">Unidad Organizacional</label>
                            <select class="form-select" id="unidad_organizacional" name="unidad_organizacional">
                                <option value="">Seleccionar...</option>
                                <option value="DIRECCIÓN GENERAL" {% if funcionario['unidad_organizacional'] == 'DIRECCIÓN GENERAL' %}selected{% endif %}>Dirección General</option>
                                <option value="GERENCIA" {% if funcionario['unidad_organizacional'] == 'GERENCIA' %}selected{% endif %}>Gerencia</option>
                                <option value="DEPARTAMENTO" {% if funcionario['unidad_organizacional'] == 'DEPARTAMENTO' %}selected{% endif %}>Departamento</option>
                                <option value="ÁREA" {% if funcionario['unidad_organizacional'] == 'ÁREA' %}selected{% endif %}>Área</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="cargo" class="form-label">Cargo</label>
                            <input type="text" class="form-control" id="cargo" name="cargo" 
                                   value="{{ funcionario['cargo'] or '' }}">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="puesto" class="form-label">Puesto</label>
                            <input type="text" class="form-control" id="puesto" name="puesto" 
                                   value="{{ funcionario['puesto'] or '' }}">
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="direccion_oficina" class="form-label">Dirección Oficina</label>
                            <input type="text" class="form-control" id="direccion_oficina" name="direccion_oficina" 
                                   value="{{ funcionario['direccion_oficina'] or '' }}">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="piso_interno" class="form-label">Piso / Interno</label>
                            <input type="text" class="form-control" id="piso_interno" name="piso_interno" 
                                   value="{{ funcionario['piso_interno'] or '' }}">
                        </div>
                    </div>
                    
                    <div class="d-flex justify-content-between mt-4">
                        <a href="{{ url_for('funcionario_ver', ci=funcionario['ci']) }}" class="btn btn-secondary">
                            <i class="fas fa-times me-1"></i> Cancelar
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-1"></i> Guardar Cambios
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}